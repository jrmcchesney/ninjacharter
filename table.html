<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barchart Ninja</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
     <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
        	MathJax.Hub.Config({extensions: ["tex2jax.js"],jax: ["input/TeX","output/HTML-CSS"], tex2jax: {inlineMath: [["\\(","\\)"]], processEscapes: true}
  });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.9.0/math.min.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
   
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.css">`
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.5.0/d3.min.js"></script>
     <script src="https://unpkg.com/d3-regression@1.3.4/dist/d3-regression.min.js"></script>
    
 </head>
<html>
<body>

<div class="container-fluid">
  
		<div class="row">
				<div class="col-sm-4">
						
							  <div class="field form-group">
								<%= form.label :title %>
								<%= form.text_field :title, :id=>'title',class: 'form-control', placeholder: 'Comparing Functions'%>
							   
							  
							  </div>
						
				</div>
				
		</div>
		<div class="row">
				<div class="col-sm-6">

							  <div class="field form-group">
								<%= form.label :header %>
								<%= form.text_field :header,:id=>'header',class: 'form-control' , placeholder: 'X-value;Linear;Quadratic;Exponential'%>
							  </div>
                 </div>
                 <div class="col-sm-6">
							  <div class="field form-group">
								<%= form.label :values %>
								<%= form.text_field :values,:id=>'values',class: 'form-control', placeholder: '0;1;2;3&5;8;11;14&0;1;4;9&5;15;45;135' %>
							  </div>
			     </div>
		</div>
		<div class="row">
			     <div class="col-sm-2">
			     			  <div class="field form-group">
								<%= form.label :headerfont %>
								<%= form.select :headerfont,[ ['12','12'],['14','14'],['16','16'],['18','18'],['20','20'],['22','22'],['24','24'],['32','32'] ] ,{} ,:id=>"headerfont", class: 'form-control'%>
							  </div>
				 </div>
				 <div class="col-sm-2">
			     			  <div class="field form-group">
								<%= form.label :headercolor %>
								<%= form.select :headercolor,[['white','white'],['yellow','yellow'], ['orange','orange'],['lavender','lavender']] ,{} ,:id=>"headercolor", class: 'form-control'%>
							  </div>
				 </div>
				 <div class="col-sm-2">
			     			  <div class="field form-group">
								<%= form.label :column1font %>
								<%= form.select :column1font, [ ['12','12'],['14','14'],['16','16'],['18','18'],['20','20'],['22','22'],['24','24'],['32','32']],{} ,:id=>"column1font", class: 'form-control'%>
							  </div>
				 </div>
				 <div class="col-sm-2">
			     			  <div class="field form-group">
								<%= form.label :column1color %>
								<%= form.select :column1color,[['white','white'],['yellow','yellow'], ['orange','orange'],['lavender','lavender']] ,{} ,:id=>"column1color", class: 'form-control'%>
							  </div>
				 </div>
				 <div class="col-sm-2">
			     			  <div class="field form-group">
								<%= form.label :cellsfont%>
								<%= form.select :cellsfont,[['12','12'],['14','14'],['16','16'],['18','18'],['20','20'],['22','22'],['24','24'],['32','32']] ,{} ,:id=>"cellsfont", class: 'form-control'%>
							  </div>
				 </div>
				 <div class="col-sm-2">
			     			  <div class="field form-group">
								<%= form.label :cellscolor %>
								<%= form.select :cellscolor,[['white','white'],['yellow','yellow'], ['orange','orange'],['lavender','lavender']] ,{} ,:id=>"cellscolor", class: 'form-control'%>
							  </div>
				 </div>
		</div>
			     	
		<div class="row">
		         <div class="col-sm-6">
							  <div class="field form-group">
								<%= form.label :description %>
								<%= form.text_area :description ,:id=>'description',class: 'form-control'%>
							  </div>
				  </div>
	    </div><br>

		<div class="row">
			 <div class="col-sm-6">			  

					  <div class="actions">
						<%= form.submit("Save Changes to Database", class:'btn btn-success', style:'width:100%' ) %>
					  </div><br>
					<% end %>
			</div>
		</div>
</div>


<div class="container-fluid">
	<div class="row">
	    <div class="col-sm-3">
				<button onclick="MakeTable()" class="btn btn-primary"  style='width:100%'  >View Table To Review</button>
		</div>
		
	    <div class="col-sm-3">
			<%= link_to 'Back To Tables', tables_path , class: 'btn btn-warning',  style:'width:100%' %>
		</div>
        <div class="col-sm-2">
				<button id="refresh", class="btn btn-primary">Latex Refresh</button>
			</div>
        
    </div>



<br>
<br>
		<div class="row">
						  <div class="col-sm-8">
									<div align="left"  style="height: 644px;border: solid black;">
									   <div align="center" id="plotly-div"></div>
									</div>
						  </div>
						  <div class="col-sm-4">
									<div align="left"   style="height: 650px;padding: 5px;">
													<h6 id="demo"></h6>
									</div>
						  </div>
			</div>
</div>
<br>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>
 

<script>
        $(document).on('click', '#refresh', function() {
      if (window.MathJax) {

							MathJax.Hub.Queue(
									["Typeset",MathJax.Hub]	
							);

	  }	
});
        
		 
        
       function MakeTable() {
       
       					var header  = [];
        var valArr  = [];
	    var values = [];
		

		var headerInput  = document.getElementById("header");
		var valuesInput = document.getElementById("values");
		
		var titleInput = document.getElementById("title");
        var descriptInput = document.getElementById("description");
        var headerfontInput = document.getElementById("headerfont");
		var headercolorInput = document.getElementById("headercolor");
		var column1fontInput = document.getElementById("column1font");
		var column1colorInput = document.getElementById("column1color");
		var cellsfontInput = document.getElementById("cellsfont");
		var cellscolorInput = document.getElementById("cellscolor");
       
					  valArr = (valuesInput.value).split('&');
					  for(var j =0; j<= valArr.length-1; j++){
							values[j] = valArr[j].split(';');
					  }
					  title = (titleInput.value);
					  header = (headerInput.value).split(';');
					  description = (descriptInput.value);
					  headerfont = (headerfontInput.value);
					  headercolor = (headercolorInput.value);
					  column1font = (column1fontInput.value);
					  column1color = (column1colorInput.value);
					  cellsfont = (cellsfontInput.value);
					  cellscolor = (cellscolorInput.value);
			  
                     
                  var data = [{
					  type: 'table',
					  header: {
					    values: header,
					    height: 35,
						align: "center",
						line: {width: 1, color: 'black'},
						fill: {color: headercolor},
						font: {family: "Arial", size: headerfont, color: "black"}
					  },
					  cells: {
						values: values,
						height: 35,
						align: "center",
						line: {color: "black", width: 1},
						fill: {color: [column1color,cellscolor]},
						font: {family: "Arial", size: [column1font,cellsfont], color: ["black"]}
					  }
					}];
					
					layout= { height:400,
					showlegend: true,
	                          legend: {"orientation": "h",x:0,y:1.1},
								title: {
					text: title,
					font: {
					  
					  size: 26
					}}
			         };
					
					

					Plotly.newPlot('plotly-div', data,layout);
		            document.getElementById("demo").innerHTML =  'Editable Text Area ' +'<br>'+'<br>' +  '<div contenteditable="true" style="height:597px;border: solid black;">'+description+'</textarea>';
		 
      if (window.MathJax) {

							MathJax.Hub.Queue(
									["Typeset",MathJax.Hub]	
							);

	  }	

		}				
		
</script>




 