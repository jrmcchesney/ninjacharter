<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barchart Ninja</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
     <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
        	MathJax.Hub.Config({extensions: ["tex2jax.js"],jax: ["input/TeX","output/HTML-CSS"], tex2jax: {inlineMath: [["\\(","\\)"]], processEscapes: true}
  });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.9.0/math.min.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
   
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.css">`
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.5.0/d3.min.js"></script>
     <script src="https://unpkg.com/d3-regression@1.3.4/dist/d3-regression.min.js"></script>
    
 </head>
<html>
<body>


<h1 align="center">Make bar chart</h1><br>

<div class="container-fluid" style="padding: 7px;">
    <div class="row">
    	  <div class="col-sm-6">
				  <div class="field form-group">
					<label for="title">Title</label>
					<input id="title"  type="text"  class="form-control" />
				  </div>
		  </div>
		  
		  
	</div>
  	<div class="row">
          
          <div class="col-sm-4">
				  <div class="field form-group">
					<label for="xdata">xdata</label>
					<input id="xdata"  type="text"  class="form-control" />
					
				  </div>
          </div>
          <div class="col-sm-4">
				  <div class="field form-group">
					<label for="datasets">Datasets</label>
					<select id="datasets" class="form-control"><option value="1">1 dataset</option><option value="2">2 datasets</option><option value="3">3 datasets</option></select>
				</div>
          </div>
          
    </div>
    <div class="row">
          <div class="col-sm-4">
				  <div class="field form-group ">
					<label for="name1">name1</label>
					<input id="name1"  type="text"  class="form-control" />
				  </div>
          </div>
          
          <div class="col-sm-4">
				  <div class="field form-group ">
					<label for="name2">name2</label>
					<input id="name2"  type="text"  class="form-control" />
				  </div>
          </div>   
          
          <div class="col-sm-4">
				  <div class="field form-group ">
					<label for="name3">name3</label>
					<input id="name3"  type="text"  class="form-control" />
				  </div>
          </div>
    </div>
    <div class="row">
          <div class="col-sm-4">
				  <div class="field form-group ">
					<label for="ydata">ydata</label>
					<input id="ydata"  type="text"  class="form-control" />
				  </div>
          </div>
          
          <div class="col-sm-4">
				  <div class="field form-group ">
					<label for="ydata2">ydata2</label>
					<input id="ydata2"  type="text"  class="form-control" />
				  </div>
          </div>   
          
          <div class="col-sm-4">
				  <div class="field form-group ">
					<label for="ydata3">ydata3</label>
					<input id="ydata3"  type="text"  class="form-control" />
				  </div>
          </div>
    </div>
    <div class="row">
    	  <div class="col-sm-3">
				  <div class="field form-group">
					<label for="labelx">labelx</label>
					<input id="labelx"  type="text"  class="form-control" />
				  </div>
		  </div>		   
          <div class="col-sm-3">  
				  <div class="field form-group ">
					<label for="labely">labely</label>
					<input id="labely"  type="text"  class="form-control" />
				  </div>
          </div>
          <div class="col-sm-6">  
				  <div class="field form-group ">
					
					<label for="description">Description</label>
					<textarea id="description" class="form-control"></textarea>

				  </div>
          </div>
          
    </div>
    
  
</div>




<div class="container-fluid" style="padding: 7px;">
		<div class="row">
			<div class="col-sm-3">
					<button onclick="MakeBarChart()" class="btn btn-primary"  style="width:100%;">View Barchart To Review</button>
			</div>
		
			
			<div class="col-sm-2">
				<button id="refresh", class="btn btn-primary">Latex Refresh</button>
			</div>
		
</div>



	<br>
	<br>
			<div class="row">
						  <div class="col-sm-8">
									<div align="left"  style="height: 644px;border: solid black;">
									   <div align="center" id="plotly-div"></div>
									</div>
						  </div>
						  <div class="col-sm-4">
									<div align="left"   style="height: 652px;padding: 5px;">
													<h6 id="demo"></h6>
									</div>
						  </div>
			</div>

</div>
<a href="piechart.html" target="_blank">
    <button style="background-color: blue; color: white;">Click Me!</button>
</a>


 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>
 
 
 <script>
 
 $(document).on('click', '#refresh', function() {
      if (window.MathJax) {

							MathJax.Hub.Queue(
									["Typeset",MathJax.Hub]	
							);

	  }	
});
        
        var range  = [];
	    var domain = [];
		

		var rangeInput  = document.getElementById("ydata");
		var domainInput = document.getElementById("xdata");
		var range2Input  = document.getElementById("ydata2");
		
		var range3Input  = document.getElementById("ydata3");
		
		var labelxInput = document.getElementById("labelx");
		var labelyInput = document.getElementById("labely");
		var titleInput = document.getElementById("title");
        var descriptInput = document.getElementById("description");
        var name1Input = document.getElementById("name1");
        var name2Input = document.getElementById("name2");
        var name3Input = document.getElementById("name3");
        var datasetsInput = document.getElementById("datasets");
		
		 
        
       function MakeBarChart() {
       
       
                    
                     domain = (domainInput.value).split(';');
					 range = (rangeInput.value).split(';');
					 
					 range2 = (range2Input.value).split(';');
					 
					 range3 = (range3Input.value).split(';');
					 labelx = (labelxInput.value);
					 labely = (labelyInput.value);
					 title = (titleInput.value);
					 description = (descriptInput.value);
					 name1 = (name1Input.value);
					 name2 = (name2Input.value);
					 name3 = (name3Input.value);
					 datasets = (datasetsInput.value);
					 if (datasets == "1") {
					 
					     color = ['rgb(34, 139, 34)','rgb(205, 92, 92)','rgb(102, 51, 153)','rgb(139, 69, 19)','rgb(123, 104, 238)','rgb(255, 165, 0)','rgb(255, 0, 0)','rgb(255, 255, 0)','rgb(34, 139, 34)','rgb(205, 92, 92)','rgb(102, 51, 153)','rgb(139, 69, 19)','rgb(123, 104, 238)','rgb(255, 165, 0)','rgb(255, 0, 0)','rgb(255, 255, 0)','rgb(34, 139, 34)','rgb(205, 92, 92)','rgb(102, 51, 153)','rgb(139, 69, 19)','rgb(123, 104, 238)','rgb(255, 165, 0)','rgb(255, 0, 0)','rgb(255, 255, 0)'];
					 } else {color = 'rgb(34, 139, 34)';}
					 
		 var trace1 = {
				type: 'bar',
			  x: range,
			  y: domain,
			  name: name1,
			  orientation: 'h',
			  text: range.map(String),
			  textposition: 'outside',
			  opacity: 0.7,
			  marker: {
				color: color,
				line: {
				  color: 'rgb(8,48,107)',
				  width: 1.5
				}
			  },
				
			  
			  hoverinfo: 'none'
		  
		};
		
		var trace2 = {
				type: 'bar',
			  x: domain,
			  y: range2,
			  name: name2,
			  text: range2.map(String),
			  textposition: 'outside',
			  opacity: 0.7,
			  marker:{
				color: 'rgb(205, 92, 92)',
				line: {
				  color: 'rgb(8,48,107)',
				  width: 1.5
				}
			  },
				
			  hoverinfo: 'none'
		  
		};

        var trace3 = {
				type: 'bar',
			  x: domain,
			  y: range3,
			  name: name3,
			  text: range3.map(String),
			  textposition: 'outside',
			  opacity: 0.7,
			  marker:{
				color: 'rgb(102, 51, 153)',
				line: {
				  color: 'rgb(8,48,107)',
				  width: 1.5
				}
			  },
				
			  hoverinfo: 'none'
		  
		};
		
		
        if (datasets == "1")  {
			var data = [trace1];
		} else if (datasets == "2") {
		    var data = [trace1,trace2];
		} else {var data = [trace1,trace2,trace3];}
		
       
		var layout = {
							  title: title,
							  height: 600,
							  
							  titlefont: {size: 24},
							  xaxis: {title: {text: labelx ,font:{size:18}}, type:'category'},
			
							  yaxis: {title: {text:labely, font: {size:18}},gridwidth: 1,gridcolor: 'black'}
							 
			
					};
		
				var config = {responsive: true}

				Plotly.newPlot('plotly-div', data, layout);
				document.getElementById("demo").innerHTML =  'Editable Text Area ' +'<br>'+'<br>' +  '<div contenteditable="true" style="height: 597px;border: solid black;">'+description+'</textarea>';
		        if (window.MathJax) {

										MathJax.Hub.Queue(
												["Typeset",MathJax.Hub]	
										);

							}	
		}
		
				
		
</script>


</html>
